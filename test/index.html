<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>
<div>
<canvas id="test" width="500" height="500"></canvas>
</div>
<button onclick="del()" type="button">del</button>
<button onclick="mosaic()" type="button">mosaic</button>
<input type='file' accept="image/*" multiple v-on:change="fileChange"/>
</body>
<script src="../dist/fabric.js"></script>
<script
        src="https://code.jquery.com/jquery-3.3.1.slim.js"
        integrity="sha256-fNXJFIlca05BIO2Y5zh1xrShK3ME+/lYZ0j+ChxX2DA="
        crossorigin="anonymous"></script>
<script>
  let canvas = new fabric.Canvas('test', {
    width: 500,
    height: 500,
    noSelector: true
  });

  let rect = new fabric.Rect({
    left: 10,
    top: 10,
    width: 100,
    height: 100,
    cornerColor: 'yellow',
    fill: 'rgba(255, 0, 0, 0.5)',
    cornerStyle: 'cropper',
    cornerSize: 48,
    borderLineWidth: 1,
    borderColor: '#fff',
    cornerStrokeSize: 4,
    hasRotatingPoint: false
  });
  canvas.add(rect);

  let text = new fabric.Text('新年好～', {
    left: 300,
    top: 300,
    outerDecotation: {
      backgroundColor: '#ffecd0',
      borderColor: '#cd1b1e',
      borderLineWidth: 2,
      cornerSize: 40,
      radius: 10,
      offsetX: 24,
      offsetY: 12,
      tl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+ICA8bWV0YWRhdGE+PD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz48eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+ICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+ICAgPC9yZGY6UkRGPjwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PjwvbWV0YWRhdGE+PGRlZnM+ICAgIDxzdHlsZT4gICAgICAuY2xzLTEgeyAgICAgICAgZmlsbDogI2YxNDQ0NDsgICAgICAgIGZpbGwtcnVsZTogZXZlbm9kZDsgICAgICB9ICAgIDwvc3R5bGU+ICA8L2RlZnM+ICA8ZyBpZD0iVG9wX2xlZnQiPiAgICA8ZyBpZD0iVG9wX2xlZnQtMiIgZGF0YS1uYW1lPSJUb3BfbGVmdCI+ICAgICAgPHBhdGggaWQ9IuWchuinkuefqeW9ol83X+aLt+i0nV84IiBkYXRhLW5hbWU9IuWchuinkuefqeW9oiA3IOaLt+i0nSA4IiBjbGFzcz0iY2xzLTEiIGQ9Ik0xMjY3LjY5LDMwOWExLjU0LDEuNTQsMCwwLDEsMS41NCwxLjUzOHYzLjA3N2ExLjU0LDEuNTQsMCwwLDEtMy4wOCwwdi0zLjA3N0ExLjU0LDEuNTQsMCwwLDEsMTI2Ny42OSwzMDlabTAsOS44NDZhMS41NCwxLjU0LDAsMCwxLDEuNTQsMS41Mzl2My4wNzdhMS41NCwxLjU0LDAsMCwxLTMuMDgsMHYtMy4wNzdBMS41NCwxLjU0LDAsMCwxLDEyNjcuNjksMzE4Ljg0NlptMy42OS0zLjA3N2gzLjA4YTEuNTM5LDEuNTM5LDAsMSwxLDAsMy4wNzdoLTMuMDhBMS41MzksMS41MzksMCwwLDEsMTI3MS4zOCwzMTUuNzY5Wm0tOS44NCwwaDMuMDhhMS41MzksMS41MzksMCwwLDEsMCwzLjA3N2gtMy4wOEExLjUzOSwxLjUzOSwwLDEsMSwxMjYxLjU0LDMxNS43NjlaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxMyAtMjYwKSIvPiAgICAgIDxwYXRoIGlkPSLlnIbop5Lnn6nlvaJfN1/mi7fotJ1fOC0yIiBkYXRhLW5hbWU9IuWchuinkuefqeW9oiA3IOaLt+i0nSA4IiBjbGFzcz0iY2xzLTEiIGQ9Ik0xMjkyLjI1LDMyNWExLjI0NSwxLjI0NSwwLDAsMSwxLjI0LDEuMjQ0djIuNTE0YTEuMjQ1LDEuMjQ1LDAsMCwxLTIuNDksMHYtMi41MTRBMS4yNDcsMS4yNDcsMCwwLDEsMTI5Mi4yNSwzMjVabTAsOGExLjI0NSwxLjI0NSwwLDAsMSwxLjI0LDEuMjQ0djIuNTE0YTEuMjQ1LDEuMjQ1LDAsMCwxLTIuNDksMHYtMi41MTRBMS4yNDcsMS4yNDcsMCwwLDEsMTI5Mi4yNSwzMzNabTMtMi41aDIuNWExLjI1LDEuMjUsMCwwLDEsMCwyLjVoLTIuNUExLjI1LDEuMjUsMCwwLDEsMTI5NS4yNSwzMzAuNVptLTguMDEuMDFoMi41MmExLjI0NCwxLjI0NCwwLDAsMSwwLDIuNDg4aC0yLjUyQTEuMjQ0LDEuMjQ0LDAsMCwxLDEyODcuMjQsMzMwLjUxWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMTMgLTI2MCkiLz4gICAgPC9nPiAgPC9nPjwvc3ZnPg==',
      tr: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+ICA8bWV0YWRhdGE+PD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz48eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+ICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+ICAgPC9yZGY6UkRGPjwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PjwvbWV0YWRhdGE+PGRlZnM+ICAgIDxzdHlsZT4gICAgICAuY2xzLTEgeyAgICAgICAgZmlsbDogI2YxNDQ0NDsgICAgICAgIGZpbGwtcnVsZTogZXZlbm9kZDsgICAgICB9ICAgIDwvc3R5bGU+ICA8L2RlZnM+ICA8ZyBpZD0iVG9wX3JpZ2h0Ij4gICAgPGcgaWQ9IlRvcF9yaWdodC0yIiBkYXRhLW5hbWU9IlRvcF9yaWdodCI+ICAgICAgPHBhdGggaWQ9IuWchuinkuefqeW9ol83X+aLt+i0nV8zIiBkYXRhLW5hbWU9IuWchuinkuefqeW9oiA3IOaLt+i0nSAzIiBjbGFzcz0iY2xzLTEiIGQ9Ik0xNDcyLjUsMzI3YTIuNSwyLjUsMCwwLDEsMi41LDIuNXY1YTIuNSwyLjUsMCwwLDEtNSwwdi01QTIuNSwyLjUsMCwwLDEsMTQ3Mi41LDMyN1ptMCwxNmEyLjUsMi41LDAsMCwxLDIuNSwyLjV2NWEyLjUsMi41LDAsMCwxLTUsMHYtNUEyLjUsMi41LDAsMCwxLDE0NzIuNSwzNDNabTYtNWg1YTIuNSwyLjUsMCwwLDEsMCw1aC01QTIuNSwyLjUsMCwwLDEsMTQ3OC41LDMzOFptLTE2LDBoNWEyLjUsMi41LDAsMCwxLDAsNWgtNUEyLjUsMi41LDAsMCwxLDE0NjIuNSwzMzhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQzMyAtMjYwKSIvPiAgICAgIDxwYXRoIGlkPSLlnIbop5Lnn6nlvaJfN1/mi7fotJ1fNCIgZGF0YS1uYW1lPSLlnIbop5Lnn6nlvaIgNyDmi7fotJ0gNCIgY2xhc3M9ImNscy0xIiBkPSJNMTQ3NC42OSwzMDBhMS41NCwxLjU0LDAsMCwxLDEuNTQsMS41Mzh2My4wNzdhMS41NCwxLjU0LDAsMCwxLTMuMDgsMHYtMy4wNzdBMS41NCwxLjU0LDAsMCwxLDE0NzQuNjksMzAwWm0wLDkuODQ2YTEuNTQsMS41NCwwLDAsMSwxLjU0LDEuNTM5djMuMDc3YTEuNTQsMS41NCwwLDAsMS0zLjA4LDB2LTMuMDc3QTEuNTQsMS41NCwwLDAsMSwxNDc0LjY5LDMwOS44NDZabTMuNjktMy4wNzdoMy4wOGExLjUzOSwxLjUzOSwwLDEsMSwwLDMuMDc3aC0zLjA4QTEuNTM5LDEuNTM5LDAsMCwxLDE0NzguMzgsMzA2Ljc2OVptLTkuODQsMGgzLjA4YTEuNTM5LDEuNTM5LDAsMCwxLDAsMy4wNzdoLTMuMDhBMS41MzksMS41MzksMCwxLDEsMTQ2OC41NCwzMDYuNzY5WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0MzMgLTI2MCkiLz4gICAgICA8cGF0aCBpZD0i5ZyG6KeS55+p5b2iXzdf5ou36LSdXzUiIGRhdGEtbmFtZT0i5ZyG6KeS55+p5b2iIDcg5ou36LSdIDUiIGNsYXNzPSJjbHMtMSIgZD0iTTE0OTkuMjUsMzE2YTEuMjQ1LDEuMjQ1LDAsMCwxLDEuMjQsMS4yNDR2Mi41MTRhMS4yNDUsMS4yNDUsMCwwLDEtMi40OSwwdi0yLjUxNEExLjI0NywxLjI0NywwLDAsMSwxNDk5LjI1LDMxNlptMCw4YTEuMjQ1LDEuMjQ1LDAsMCwxLDEuMjQsMS4yNDR2Mi41MTRhMS4yNDUsMS4yNDUsMCwwLDEtMi40OSwwdi0yLjUxNEExLjI0NywxLjI0NywwLDAsMSwxNDk5LjI1LDMyNFptMy0yLjVoMi41YTEuMjUsMS4yNSwwLDAsMSwwLDIuNWgtMi41QTEuMjUsMS4yNSwwLDAsMSwxNTAyLjI1LDMyMS41Wm0tOC4wMS4wMWgyLjUyYTEuMjQ0LDEuMjQ0LDAsMCwxLDAsMi40ODhoLTIuNTJBMS4yNDQsMS4yNDQsMCwwLDEsMTQ5NC4yNCwzMjEuNTFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQzMyAtMjYwKSIvPiAgICAgIDxwYXRoIGlkPSLlnIbop5Lnn6nlvaJfN1/mi7fotJ1fNyIgZGF0YS1uYW1lPSLlnIbop5Lnn6nlvaIgNyDmi7fotJ0gNyIgY2xhc3M9ImNscy0xIiBkPSJNMTQ0OS4yNSwzMjVhMS4yNDUsMS4yNDUsMCwwLDEsMS4yNCwxLjI0NHYyLjUxNGExLjI0NSwxLjI0NSwwLDAsMS0yLjQ5LDB2LTIuNTE0QTEuMjQ3LDEuMjQ3LDAsMCwxLDE0NDkuMjUsMzI1Wm0wLDhhMS4yNDUsMS4yNDUsMCwwLDEsMS4yNCwxLjI0NHYyLjUxNGExLjI0NSwxLjI0NSwwLDAsMS0yLjQ5LDB2LTIuNTE0QTEuMjQ3LDEuMjQ3LDAsMCwxLDE0NDkuMjUsMzMzWm0zLTIuNWgyLjVhMS4yNSwxLjI1LDAsMCwxLDAsMi41aC0yLjVBMS4yNSwxLjI1LDAsMCwxLDE0NTIuMjUsMzMwLjVabS04LjAxLjAxaDIuNTJhMS4yNDQsMS4yNDQsMCwwLDEsMCwyLjQ4OGgtMi41MkExLjI0NCwxLjI0NCwwLDAsMSwxNDQ0LjI0LDMzMC41MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNDMzIC0yNjApIi8+ICAgIDwvZz4gIDwvZz48L3N2Zz4=',
      bl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+ICA8bWV0YWRhdGE+PD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz48eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+ICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+ICAgPC9yZGY6UkRGPjwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PjwvbWV0YWRhdGE+PGRlZnM+ICAgIDxzdHlsZT4gICAgICAuY2xzLTEgeyAgICAgICAgZmlsbDogI2VhNGM0YzsgICAgICB9ICAgICAgLmNscy0xLCAuY2xzLTIsIC5jbHMtMywgLmNscy00LCAuY2xzLTUgeyAgICAgICAgc3Ryb2tlOiAjY2QxYjFlOyAgICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kOyAgICAgICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDsgICAgICAgIHN0cm9rZS13aWR0aDogM3B4OyAgICAgIH0gICAgICAuY2xzLTEsIC5jbHMtMiwgLmNscy0zLCAuY2xzLTQgeyAgICAgICAgZmlsbC1ydWxlOiBldmVub2RkOyAgICAgIH0gICAgICAuY2xzLTIgeyAgICAgICAgZmlsbDogI2YzNjE2MTsgICAgICB9ICAgICAgLmNscy0zIHsgICAgICAgIGZpbGw6ICNmZjUxNTE7ICAgICAgfSAgICAgIC5jbHMtNCB7ICAgICAgICBmaWxsOiAjZmY2NzY3OyAgICAgIH0gICAgICAuY2xzLTUgeyAgICAgICAgZmlsbDogI2ZmYzY3MDsgICAgICB9ICAgICAgLmNscy02IHsgICAgICAgIGZvbnQtc2l6ZTogMTguNjY3cHg7ICAgICAgICBmaWxsOiAjY2QxYjFlOyAgICAgICAgdGV4dC1hbmNob3I6IG1pZGRsZTsgICAgICAgIGZvbnQtZmFtaWx5OiAiUGluZ0ZhbmcgU0MiOyAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsgICAgICB9ICAgIDwvc3R5bGU+ICA8L2RlZnM+ICA8ZyBpZD0iQm90dG9tX2xlZnQiPiAgICA8ZyBpZD0iQm90dG9tX2xlZnQtMiIgZGF0YS1uYW1lPSJCb3R0b21fbGVmdCI+ICAgICAgPGcgaWQ9Iue6ouWMhSI+ICAgICAgICA8cGF0aCBpZD0i5ZyG6KeS55+p5b2iXzEiIGRhdGEtbmFtZT0i5ZyG6KeS55+p5b2iIDEiIGNsYXNzPSJjbHMtMSIgZD0iTTEyOTQuNTcsNDI5Ljg4NmwxOS45LDguNDEzYTUuNjc2LDUuNjc2LDAsMCwxLDIuOTMsNy40NjdsLTEzLjQ0LDMxLjc4OWE1LjY2Niw1LjY2NiwwLDAsMS03LjM5LDMuMTA1bC0xOS45MS04LjQxMmE1LjY2NSw1LjY2NSwwLDAsMS0yLjkyLTcuNDY4bDEzLjQzLTMxLjc4OUE1LjY4MSw1LjY4MSwwLDAsMSwxMjk0LjU3LDQyOS44ODZaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxMyAtNDA2KSIvPiAgICAgICAgPHBhdGggaWQ9IuW9oueKtl8xMSIgZGF0YS1uYW1lPSLlvaLnirYgMTEiIGNsYXNzPSJjbHMtMiIgZD0iTTEyODUuNTMsNDM3LjEzM3MtMC44Myw2LjUyMiwxMi45NiwxMi40ODksMTcuMDcsMC45ODUsMTcuMDcuOTg1bDIuNTItNS45NDdhNy42NzksNy42NzksMCwwLDAtNS40Mi02Ljk2M2MtNS4wOC0yLjE1NS0xOC4wNi03LjYzNC0xOC4wNi03LjYzNHMtNS41OS0xLjUtNy40LDMuMTA1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMTMgLTQwNikiLz4gICAgICA8L2c+ICAgICAgPGcgaWQ9Iue6ouWMhS0yIiBkYXRhLW5hbWU9Iue6ouWMhSI+ICAgICAgICA8cGF0aCBpZD0i5ZyG6KeS55+p5b2iXzEtMiIgZGF0YS1uYW1lPSLlnIbop5Lnn6nlvaIgMSIgY2xhc3M9ImNscy0zIiBkPSJNMTI1My44Nyw0MTcuNzg4aDMwLjg1YTgsOCwwLDAsMSw4LDhWNDczLjlhOCw4LDAsMCwxLTgsOGgtMzAuODVhOCw4LDAsMCwxLTgtOFY0MjUuNzg4QTgsOCwwLDAsMSwxMjUzLjg3LDQxNy43ODhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxMyAtNDA2KSIvPiAgICAgICAgPHBhdGggaWQ9IuW9oueKtl8xMS0yIiBkYXRhLW5hbWU9IuW9oueKtiAxMSIgY2xhc3M9ImNscy00IiBkPSJNMTI0Niw0MzJzMi41NCw4LjgyNCwyNCw5LDIzLTgsMjMtOHYtOXMtMi42NC02LjQwOS0xMS02Yy03Ljg3LS4wMTMtMjgsMC0yOCwwcy04LjE4LDEuMS04LDh2NloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMjEzIC00MDYpIi8+ICAgICAgICA8Y2lyY2xlIGlkPSLmpK3lnIZfMiIgZGF0YS1uYW1lPSLmpK3lnIYgMiIgY2xhc3M9ImNscy01IiBjeD0iNTYuMyIgY3k9IjM1LjE3MiIgcj0iMTAuNDIiLz4gICAgICAgIDx0ZXh0IGlkPSJfIiBkYXRhLW5hbWU9IsKlIiBjbGFzcz0iY2xzLTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU2LjAzMiA0MC44MzYpIHNjYWxlKDAuNzQ0IDAuNzQzKSI+wqU8L3RleHQ+ICAgICAgPC9nPiAgICA8L2c+ICA8L2c+PC9zdmc+',
      br: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+ICA8bWV0YWRhdGE+PD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz48eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+ICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+ICAgPC9yZGY6UkRGPjwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PjwvbWV0YWRhdGE+PGRlZnM+ICAgIDxzdHlsZT4gICAgICAuY2xzLTEgeyAgICAgICAgZmlsbDogI2Y5YjM1ODsgICAgICB9ICAgICAgLmNscy0xLCAuY2xzLTIsIC5jbHMtMyB7ICAgICAgICBzdHJva2U6ICNjZDFiMWU7ICAgICAgICBzdHJva2UtbGluZWNhcDogcm91bmQ7ICAgICAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kOyAgICAgICAgc3Ryb2tlLXdpZHRoOiAzcHg7ICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7ICAgICAgfSAgICAgIC5jbHMtMiB7ICAgICAgICBmaWxsOiAjZmZhYzQwOyAgICAgIH0gICAgICAuY2xzLTMgeyAgICAgICAgZmlsbDogI2ZlY2MyNDsgICAgICB9ICAgIDwvc3R5bGU+ICA8L2RlZnM+ICA8ZyBpZD0iQm90dG9tX3JpZ2h0Ij4gICAgPGcgaWQ9IkJvdHRvbV9yaWdodC0yIiBkYXRhLW5hbWU9IkJvdHRvbV9yaWdodCI+ICAgICAgPGcgaWQ9IuWFg+WunSI+ICAgICAgICA8cGF0aCBpZD0i5b2i54q2XzkiIGRhdGEtbmFtZT0i5b2i54q2IDkiIGNsYXNzPSJjbHMtMSIgZD0iTTE0ODQuNzksNDYwLjU2MnM5LjQ3LTE1LjEsMjEuNTUuNTIzbC0xLjU3LDcuMzMxLTE4LjkzLS41MjNaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQzMyAtNDA2KSIvPiAgICAgICAgPHBhdGggaWQ9IuW9oueKtl84IiBkYXRhLW5hbWU9IuW9oueKtiA4IiBjbGFzcz0iY2xzLTIiIGQ9Ik0xNDgzLjIxLDQ1OS41MTVzMTAuNjgsOC41MzQsMjUuMjQsMGM0LjMtLjUsOC4yMiw2LjczNSwzLjE1LDE0LjY2MXMtMjIuODMsOS4xNjEtMjguOTIsMi42MTlDMTQ3NS40Nyw0NzAuNiwxNDc0LjU3LDQ2MC4xODIsMTQ4My4yMSw0NTkuNTE1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0MzMgLTQwNikiLz4gICAgICA8L2c+ICAgICAgPGcgaWQ9IuWFg+WunS0yIiBkYXRhLW5hbWU9IuWFg+WunSI+ICAgICAgICA8cGF0aCBpZD0i5b2i54q2XzktMiIgZGF0YS1uYW1lPSLlvaLnirYgOSIgY2xhc3M9ImNscy0yIiBkPSJNMTQ0OS40Miw0NDguNDVzMTUuMTEtMjQuMDQxLDM0LjM3LjgzNGwtMi41MSwxMS42NzUtMzAuMTgtLjgzNFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNDMzIC00MDYpIi8+ICAgICAgICA8cGF0aCBpZD0i5b2i54q2XzgtMiIgZGF0YS1uYW1lPSLlvaLnirYgOCIgY2xhc3M9ImNscy0zIiBkPSJNMTQ0Ni45LDQ0Ni43ODJzMTcuMDQsMTMuNTkzLDQwLjI0LDBjNi44Ny0uNzg4LDEzLjEyLDEwLjcyOCw1LjAzLDIzLjM1MXMtMzYuNDEsMTQuNTg5LTQ2LjExLDQuMTY5QzE0MzQuNTUsNDY0LjQ0MiwxNDMzLjEyLDQ0Ny44NDYsMTQ0Ni45LDQ0Ni43ODJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQzMyAtNDA2KSIvPiAgICAgIDwvZz4gICAgPC9nPiAgPC9nPjwvc3ZnPg=='
    },
    borderColor: "#fff",
    borderLineWidth: 2,
    cornerSize: 24,
    cornerStyle: "editor",
    fill: "#f14444",
    fontFamily: "Noto Sans",
    fontSize: 24,
    hasRotatingPoint: false
  });
  canvas.add(text);
  canvas.renderAll();
  // text = new fabric.Text('不是彩虹', {
  //   left: 10,
  //   top: 10,
  //   borderColor: "#fff",
  //   borderLineWidth: 2,
  //   cornerSize: 25,
  //   cornerStyle: "editor",
  //   fill: "#000",
  //   fontFamily: "Noto Sans",
  //   fontSize: 50,
  //   stroke: '#fff',
  //   strokeWidth: 2 * 5,
  //   hasRotatingPoint: false
  // });
  // canvas.add(text);
  // canvas.renderAll();
  canvas.on('object:remove', (params) => {
    setTimeout(() => {
      let obj = canvas.getActiveObject();
      console.log(obj == params.target);
      canvas.remove(obj);
    }, 100);
  });

  function del() {
    let obj = canvas.getActiveObject();
    console.log(obj);
    canvas.remove(obj);
  }

  function mosaic() {
    canvas.isDrawingMode = true;
    var ca = document.getElementById('test');
    var ctx = canvas.getContext('2d');
    var width = canvas.width * 2;
    var height = canvas.height * 2;
    var imageData = ctx.getImageData(0, 0, width, height);

    // 笔刷
    var brush = new fabric.MosaicBrush(canvas);
    canvas.freeDrawingBrush = brush;
    canvas.freeDrawingBrush.width = 8;
    canvas.freeDrawingBrush.blocksize = 4;
    canvas.freeDrawingBrush.mosaicSign = new Date().getTime();
  }

  // 图片选择
  var $files = $('input:file');
  $files.change((e) => {
    var file = e.target.files[0];
    var url = URL.createObjectURL(file);

    fabric.Image.fromURL(url, (img) => {
      canvas.add(img);
    })
  })
</script>
</html>
